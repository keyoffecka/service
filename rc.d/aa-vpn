source /etc/sysconfig/network

case $command_name in
  start)
    if $SERVICE $service_name status >/dev/null 2>&1 ; then
      print_msg "AA VPN client is already running"
    else
      print_msg "Starting the AA VPN client"
      
      modprobe tun
      
      cd /private/prj/toptal/aa/doc/vpn
      nohup /usr/bin/openvpn --config client.ovpn >/var/log/aa-openvpn.log 2>&1 &
      vpn__pid=$!
      
      check_process_running $vpn__pid
      success $?
      
      if [ "$ret_val" == "0" ] ; then
        register $vpn__pid
        print_msg "The AA VPN client started normally"
      else
        print_msg "The VPN client failed to start"
      fi
    fi
  ;;
esac
